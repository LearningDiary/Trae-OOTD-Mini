<!--index.wxml-->
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container-ootd">
    
    <!-- å†…å®¹åŒºåŸŸ -->
    <view class="content-area">
      <!-- ä»Šæ—¥å¤©æ°”å¡ç‰‡ -->
      <view class="card">
        <view class="weather-header">
          <view>
            <text class="weather-title">ä»Šæ—¥å¤©æ°”</text>
            <view class="weather-subtitle">
              <text id="current-date">{{currentDate}}</text>
            </view>
            <view class="weather-subtitle">
              <text id="current-city">{{userData.city || 'åŒ—äº¬'}}</text>
            </view>
          </view>
          <view class="weather-info">
            <text class="weather-icon">â˜€ï¸</text>
            <text class="weather-temp" id="current-temp">{{currentTemp || '25Â°C'}}</text>
            <text class="weather-desc" id="weather-desc">{{weatherDesc || 'æ™´æœ—'}}</text>
          </view>
        </view>
        <view class="weather-details">
          <view class="weather-detail-item">
            <text class="detail-icon">ğŸ’§</text>
            <text class="detail-label">æ¹¿åº¦</text>
            <text class="detail-value">65%</text>
          </view>
          <view class="weather-detail-item">
            <text class="detail-icon">ğŸŒ¬ï¸</text>
            <text class="detail-label">é£é€Ÿ</text>
            <text class="detail-value">3.5 km/h</text>
          </view>
          <view class="weather-detail-item">
            <text class="detail-icon">â˜€ï¸</text>
            <text class="detail-label">ç´«å¤–çº¿</text>
            <text class="detail-value">ä¸­ç­‰</text>
          </view>
        </view>
      </view>
      
      <!-- è¿‘7æ—¥å¤©æ°”å¡ç‰‡ -->
      <view class="card">
        <text class="weather-title">è¿‘7æ—¥å¤©æ°”</text>
        <view class="forecast-list">
          <view class="forecast-item" wx:for="{{forecastData}}" wx:key="day">
            <text class="forecast-day">{{item.day}}</text>
            <view class="forecast-bar">
              <view class="forecast-bar-bg">
                <view class="forecast-bar-fill" style="width: {{item.tempPercent}}%"></view>
              </view>
            </view>
            <view class="forecast-temp">
              <text class="forecast-icon">{{item.icon}}</text>
              <text class="forecast-temp-text">{{item.temp}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- ä»Šæ—¥ç©¿æ­é£æ ¼å¡ç‰‡ -->
      <view class="card">
        <text class="weather-title">ä»Šæ—¥ç©¿æ­é£æ ¼</text>
        <view class="style-grid">
          <view class="style-btn {{item.active ? 'active' : ''}}" 
                wx:for="{{styleOptions}}" 
                wx:key="name"
                bindtap="selectStyle" 
                data-index="{{index}}">
            <text>{{item.name}}</text>
          </view>
        </view>
        <button class="btn-primary" bindtap="generateOOTD">
          <text class="btn-icon">ğŸ‘”</text>
          <text>ç”Ÿæˆä»Šæ—¥OOTD</text>
        </button>
      </view>
    </view>
    
    <!-- åº•éƒ¨æ ‡ç­¾æ ç”±app.jsonçš„tabBaré…ç½®æä¾› -->
    
    <!-- OOTD å¼¹å‡ºå±‚ -->
    <view class="popup {{showPopup ? 'show' : ''}}">
      <view class="popup-overlay" bindtap="closePopup"></view>
      <view class="popup-content">
        <view class="popup-header">
          <text class="popup-title">ä»Šæ—¥OOTDæ¨è</text>
          <text class="popup-close" bindtap="closePopup">âœ–</text>
        </view>
        
        <view class="popup-section">
          <text class="popup-section-title">ç©¿æ­å»ºè®®</text>
          <text class="popup-advice">{{ootdAdvice}}</text>
        </view>
        
        <view class="popup-section">
          <text class="popup-section-title">ç©¿æ­ç¤ºä¾‹</text>
          <swiper class="outfit-swiper" indicator-dots="{{true}}" autoplay="{{false}}">
            <swiper-item wx:for="{{outfitExamples}}" wx:key="id">
              <image src="{{item.image}}" mode="aspectFill" class="outfit-image"></image>
              <text class="outfit-caption">{{item.caption}}</text>
            </swiper-item>
          </swiper>
        </view>
      </view>
    </view>
  </view>
</scroll-view>
